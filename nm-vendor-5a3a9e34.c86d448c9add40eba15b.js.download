(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[16],{"./node_modules/@sky-uk/journey-tools/dist/index.es.js":function(e,n,t){"use strict";(function(e,o){t.d(n,"a",(function(){return y}));var r=t("./node_modules/react/index.js"),i=t.n(r),a=t("./node_modules/@apollo/react-components/lib/react-components.esm.js"),c=t("./node_modules/@apollo/react-hoc/lib/react-hoc.esm.js"),s=t("./node_modules/react-router/esm/react-router.js"),d=t("./node_modules/@sky-uk/journey-tools/node_modules/graphql-tag/src/index.js"),u=t.n(d);t("./node_modules/@sky-uk/cookies/dist/index.es.js"),t("./node_modules/tunnel/index.js"),t("./node_modules/axios/index.js");const l=i.a.createContext(),p=e=>{const n=Object(r.useContext)(l)||{},{navigate:t=(()=>()=>{}),components:o=[],updateContext:i,journeyId:a,pageId:c,journeyContext:s,...d}=n;return{navigate:t(null==e?void 0:e.componentId,o,i,a,c),components:o.reduce((e,n)=>{let{id:t,variant:o,experience:r,actions:i}=n;return e[t]=!o&&!r||{id:t,variant:o,experience:r,actions:i},e},{}),updateContext:i,journeyId:a,pageId:c,journeyContext:s,...d}},y=e=>{let{children:n,...t}=e;return n(p(t))};var f,m=function(e,n){return e(n={exports:{}},n.exports),n.exports}((function(e,n){Object.defineProperty(n,"__esModule",{value:!0});n.createChangeEmitter=function(){var e=[],n=e;function t(){n===e&&(n=e.slice())}return{listen:function(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var o=!0;return t(),n.push(e),function(){if(o){o=!1,t();var r=n.indexOf(e);n.splice(r,1)}}},emit:function(){for(var t=e=n,o=0;o<t.length;o++)t[o].apply(t,arguments)}}}}));(f=m)&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")&&f.default;m.createChangeEmitter;var g,v,h;!function(e){var n,t=e.Symbol;"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable"}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:o);function x(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}const j="\nintent {\n  name\n  variant\n  locale\n  type\n}\nexperience\njourneyContext\ncancel\ninitialProducts\ninitialJourneyType\ninitialQueryParams {\n  shortCode\n  interestSourceCode\n  dcmp\n  affiliate {\n    id\n    code\n  }\n}\nextras {\n  rewardCode\n  journeyType\n}\npage {\n  path\n  id\n  components {\n    id\n    variant\n    actions {\n      name\n      action\n    }\n    experience\n  }\n}",C=u()(g||(g=x(["query navigation($journeyId:String! $pageId:String! $action:String!){sales{journeyManagement{navigation(journeyId:$journeyId pageId:$pageId action:$action){id journeyId","}}customer{id prospect}}}"])),j),b=(u()(v||(v=x(["mutation startJourney( $intent:String! $variant:String $offerContext:JourneyOfferContext $extras:JourneyExtras $experience:String $savedBasketReference:String $scids:[String]$products:[JourneyProducts]$shortCode:String $dcmp:String $affiliate:AffiliateInput $decisionId:String $recommendationId:String $offers:[JourneyOfferInput!]){sales{journeyManagement{start(intent:$intent variant:$variant offerContext:$offerContext extras:$extras experience:$experience savedBasketReference:$savedBasketReference scids:$scids products:$products shortCode:$shortCode dcmp:$dcmp affiliate:$affiliate decisionId:$decisionId recommendationId:$recommendationId offers:$offers){sessionId prospect","}}}}"])),j),u()(h||(h=x(["query journeyDetails{shortCode experiment{name variant}}"])))),I=function(e){var n;let{type:t,app:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{journeyContext:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=(null==e||null===(n=e.sales)||void 0===n||null===(n=n.journeyManagement)||void 0===n?void 0:n[t])||{},{sessionId:a,prospect:c,page:s,intent:d,extras:u,experience:l,cancel:p,initialProducts:y,initialJourneyType:f,initialQueryParams:m,journeyContext:g}=i,{path:v,components:h}=s||{};return{sessionId:a,prospect:c,path:v,components:h,intent:d,app:o,extras:u,experience:l,journeyContext:g||r,cancel:p,initialProducts:y,initialJourneyType:f,initialQueryParams:m}},$=(e,n,t)=>(o,r,i,a,c)=>async function(){var s;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next",u=arguments.length>1?arguments[1]:void 0;const{actions:l=[{}]}=r.find(e=>{let{id:n}=e;return n===o})||[],{action:p}=l.find(e=>{let{name:n}=e;return n===d})||[];if(!p)throw new Error("Failed to find action name '".concat(d,"' for '").concat(o,"' in ").concat(JSON.stringify(r,null,2)));const{data:y}=await n.query({query:C,variables:{journeyId:a,pageId:c,action:p},fetchPolicy:"network-only"}),f=I(y,{type:"navigation"},t);f.prospect=null==y||null===(s=y.sales)||void 0===s||null===(s=s.customer)||void 0===s?void 0:s.prospect,f.path&&(u?e.push("".concat(f.path).concat(u)):e.push(f.path)),null==i||i(f)},w=/\/([\w-]+)(?:\/([\w-]+))?.*/,_=e=>{var n;return(null==e||null===(n=e.match(w))||void 0===n?void 0:n.splice(1))||[]},k=function(){var e,n;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=(null==t||null===(e=t.sales)||void 0===e||null===(e=e.journeyManagement)||void 0===e?void 0:e.pageConfig)||{},r=(null==t?void 0:t.identity)||{},{page:i={},intent:a={},extras:c={},experience:s={},cancel:d,initialJourneyType:u,initialProducts:l=[],initialQueryParams:p={}}=o,y=null==t||null===(n=t.sales)||void 0===n||null===(n=n.customer)||void 0===n?void 0:n.prospect,f=y?"prospect":"existing";return{components:(null==i?void 0:i.components)||[],identity:r,intent:a,experience:s,extras:c,cancel:d,initialJourneyType:u,initialProducts:l,initialQueryParams:p,customerType:f}};var O;const P=u()(O||(O=x(["query pageConfig($journeyId:String! $pageId:String! $pageConfigId:String){identity{authorization}sales{journeyManagement{pageConfig(journeyId:$journeyId pageId:$pageId pageConfigId:$pageConfigId){id intent{name variant locale type}extras{rewardCode journeyType}experience cancel initialJourneyType initialProducts initialQueryParams{shortCode interestSourceCode dcmp affiliate{id code}}page{components{id actions{name action}variant experience}}}}customer{id prospect}}}"]))),S=e=>{let{children:n,journeyId:t,pageId:o="",skip:r,onCompleted:c=(()=>{}),pageConfigId:s}=e;return i.a.createElement(a.b,{query:P,variables:{journeyId:t,pageId:o,pageConfigId:s},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,skip:r,onCompleted:e=>c(k(e))},e=>{let{data:t={},loading:o}=e;return n({...k(t),loading:o})})},E=function(e){let{prospect:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e||(n?"prospect":"existing")},T=function(){let{intent:e={},identity:n,path:t,customerType:o,prospect:r,extras:i={},cancel:a,shortCode:c,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[d,u]=_(t),{name:l,locale:p,variant:y,type:f}=e;return{...s,identity:n,intent:l,locale:p,variant:y,type:f,path:t,journeyId:d,pageId:u,customerType:E(o,{prospect:r}),extras:i,cancel:a,shortCode:c}},J="undefined"!=typeof window;(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}),(function(e){return e}))})(s.k,c.a)((function(e){let{history:n,location:{pathname:t,search:o},client:a,initialContext:c={},exclusions:s=[],children:d,overrides:u}=e;const p=J?window.__JOURNEY_CONTEXT__:c,y=(null==p?void 0:p.app)||(null==(f=o)?void 0:f.includes("app=true"));var f;const m=e=>({...T(e),navigate:$(n,a,e)}),[g,v]=Object(r.useState)(m(p)),[h,x]=Object(r.useState)(!1),j=h?"--duplicate":"",C=g.journeyId?"".concat(g.journeyId,":").concat(g.pageId).concat(j):"default",I=e=>{v({...g,...m({...e,journeyContext:g.journeyContext})})},w=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];x(e)},k=_((e=>{let{path:n,overrides:t}=e;if(!t)return n;const{pathname:o,pathnameFn:r}=t;return"function"==typeof r?r(n):o||n})({path:t,overrides:u})),O="/".concat(k.join("/")),[P,E]=k,q=!P||!E||s.includes(P),{experiment:A={}}=(()=>{let e;try{e=a.readQuery({query:b})}catch(e){}return e})()||{};return i.a.createElement(S,{journeyId:P,pageId:E,pageConfigId:C,skip:q,onCompleted:e=>{!q&&I({...e,path:O})}},e=>{let{components:n=[],identity:t,intent:o,customerType:r,extras:a,loading:c,cancel:s,experience:u,initialProducts:p,initialJourneyType:f,initialQueryParams:v}=e;const h=!n.length&&c,x=g.components?{...g,app:y,experiment:A,experience:u,updateContext:I,refetchContext:w,loading:h}:{...m({...g,identity:t,components:n,experience:u,intent:o,customerType:r,path:O,loading:h,extras:a,app:y,cancel:s,initialProducts:p,initialJourneyType:f,initialQueryParams:v,experiment:A}),updateContext:I,refetchContext:w};return i.a.createElement(l.Provider,{value:x},d)})}))}).call(this,t("./node_modules/webpack/buildin/global.js"),t("./node_modules/webpack/buildin/harmony-module.js")(e))},"./node_modules/@sky-uk/journey-tools/node_modules/graphql-tag/src/index.js":function(e,n,t){var o=t("./node_modules/graphql/language/parser.mjs").parse;function r(e){return e.replace(/[\s,]+/g," ").trim()}var i={},a={};var c=!0;var s=!1;function d(e){var n=r(e);if(i[n])return i[n];var t=o(e,{experimentalFragmentVariables:s});if(!t||"Document"!==t.kind)throw new Error("Not a valid GraphQL document.");return t=function e(n,t){var o=Object.prototype.toString.call(n);if("[object Array]"===o)return n.map((function(n){return e(n,t)}));if("[object Object]"!==o)throw new Error("Unexpected input.");t&&n.loc&&delete n.loc,n.loc&&(delete n.loc.startToken,delete n.loc.endToken);var r,i,a,c=Object.keys(n);for(r in c)c.hasOwnProperty(r)&&(i=n[c[r]],"[object Object]"!==(a=Object.prototype.toString.call(i))&&"[object Array]"!==a||(n[c[r]]=e(i,!0)));return n}(t=function(e){for(var n,t={},o=[],i=0;i<e.definitions.length;i++){var s=e.definitions[i];if("FragmentDefinition"===s.kind){var d=s.name.value,u=r((n=s.loc).source.body.substring(n.start,n.end));a.hasOwnProperty(d)&&!a[d][u]?(c&&console.warn("Warning: fragment with name "+d+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),a[d][u]=!0):a.hasOwnProperty(d)||(a[d]={},a[d][u]=!0),t[u]||(t[u]=!0,o.push(s))}else o.push(s)}return e.definitions=o,e}(t),!1),i[n]=t,t}function u(){for(var e=Array.prototype.slice.call(arguments),n=e[0],t="string"==typeof n?n:n[0],o=1;o<e.length;o++)e[o]&&e[o].kind&&"Document"===e[o].kind?t+=e[o].loc.source.body:t+=e[o],t+=n[o];return d(t)}u.default=u,u.resetCaches=function(){i={},a={}},u.disableFragmentWarnings=function(){c=!1},u.enableExperimentalFragmentVariables=function(){s=!0},u.disableExperimentalFragmentVariables=function(){s=!1},e.exports=u}}]);